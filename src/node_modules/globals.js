/*==============================================================================
 *  Title      : Global game params
 *  Author     : Digger (c) SAD-Systems <http://sad-systems.ru>
 *  Created on : 18.06.2016
 *==============================================================================
 */

var localStorage = require('localStorage'),
    isMobile     = require('isMobile');         //<-- Thanks to: https://github.com/kaimallea/isMobile

var data = {
    
    //--- Game controls:
    soundEnable : true,
    musicEnable : true,
    gameControl : isMobile.any ? 1 : 0,        // 0=keyborad, 1-gamepad, 2-gamepad2
    lang        : window.userLanguage || 'en', // en|ru
    gameName    : 'game_default'
    
    //--- Player data:
    //scene       : '',
    //map         : null,
    //positionX   : null,
    //positionY   : null,
    //collected   : [],
    //firestate   : 0,
    //gamestate   : {}
    
};

var storageName;

//==============================================================================
// Exports module values:
//==============================================================================

module.exports = {
    
    set: function (name, value) {
        data[name] = value;
        localStorage.save(storageName, data);
    },
    
    get: function (name) {
        return data[name];
    },
    
    load: function (sname) {
        storageName = sname || "globals"; 
        Phaser.Utils.extend(true, data, localStorage.load(storageName)); 
    }

};