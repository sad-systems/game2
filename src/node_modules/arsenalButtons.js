/*==============================================================================
 *  Title      : Arsenal buttons
 *  Author     : Digger (c) SAD-Systems <http://sad-systems.ru>
 *  Created on : 29.05.2016
 *==============================================================================
 */

//------------------------------------------------------------------------------
// Private
//------------------------------------------------------------------------------

var ToolButtons = require('toolButtons').theclass; 

//==============================================================================
// The Class
//==============================================================================

/**
 * Constructor
 * 
 * @param   {object} options    The JS object with initial class parameters
 * @returns {object}            A new instance of this class
 */
var ArsenallButtons = function (options) {
    
    //--------------------------------------------------------------------------
    // Config (override parent)
    //--------------------------------------------------------------------------    
    
    options = options || {};
    options = Phaser.Utils.extend(true, {
        
        frameControlName : 'Star',
        buttons : {},
        length  : 3
        
    }, options);
    
    //--------------------------------------------------------------------------    
    
    //--- Add buttons:
    
    for (var i=0; i<options.length; i++) {
        options.buttons[i] = { onUp:options.onUp, onDown:options.onDown  };
    }
    
    //--------------------------------------------------------------------------    
    
    ToolButtons.apply(this, arguments);
    return this;

};

ArsenallButtons.prototype             = Object.create(ToolButtons.prototype);
ArsenallButtons.prototype.constructor = ArsenallButtons;

//------------------------------------------------------------------------------
// Config
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Protected
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Public
//------------------------------------------------------------------------------

ArsenallButtons.prototype.push = function (tile) {
    console.log('Added to arsenal: ');
    for (var i=0; i<this.length; i++) {
        var button = this.buttons[i];
        if (!button.tile) {
            button.tile = tile; console.log(tile);
            break;
        }
    }
};

ArsenallButtons.prototype.pop = function (tile) {
    console.log('Removed from arsenal: ', tile);
};

//==============================================================================
// Exports module values:
//==============================================================================

module.exports = {
    
    /**
     * The class to inherit
     * 
     * example:
     * 
     * function childClass() {
     *      theclass.apply(this, arguments);
     * }
     * 
     * childClass.prototype = Object.create(theclass.prototype);
     * childClass.prototype.constructor = childClass;
     * 
     */
    theclass: ArsenallButtons,
    
    create: function (options) { 
        return new ArsenallButtons(options); 
    },
    
    preload: function (game) {
        game.load.atlas('toolButtons', 'assets/sprites/controls/tools.png', 'assets/sprites/controls/tools.json');
    }
    
};