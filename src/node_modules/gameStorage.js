/*==============================================================================
 *  Title      : Game storage
 *  Author     : Digger (c) SAD-Systems <http://sad-systems.ru>
 *  Created on : 18.06.2016
 *==============================================================================
 */

var localStorage = require('localStorage'),
    stateStorage = require('stateStorage').getInstance();

var data = {
    
    //--- Game data:
    scene       : '',
    map         : null,
    positionX   : null,
    positionY   : null,
    collected   : [],
    firestate   : 0,
    gamestate   : {}
    
};

var storageName;

//==============================================================================
// Exports module values:
//==============================================================================

module.exports = {
    
    //set: function (name, value) {
    //    data[name] = value;
    //    localStorage.save(storageName, data);
    //},
    
    //get: function (name) {
    //    return data[name];
    //},
    
    save: function () {
        data['gamestate'] = stateStorage.getStorage();
        localStorage.save(storageName, data);
    },
    
    load: function (sname) {
        storageName = sname || "default"; 
        Phaser.Utils.extend(true, data, localStorage.load(storageName)); 
    }

};